<!DOCTYPE html>
<html lang="en">
    <header>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Number guessing game</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <style>
            html {
                font-family: sans-serif;
            }
            body {
                width: 50%;
                max-width: 800px;
                min-width: 400px;
                margin: 0 auto;
            }
            .form input[type="number"] {
                width: 200px;
            }
            .lastResult {
                color: white;
                padding: 3px;
            }
        </style>
    </header>
    <body>
        <div class="container my-5">
            <h1 class="mb-3">
                Number guessing game
            </h1>
            <p class="text-muted">
                We have selected a random number between 1 and 100. 
                See if you can guess it in 10 turns or fewer. 
                We'll tell you if your guess was too high or too low.
            </p>
            <div class="mb-4">
                <label for="guessField" class="form-label">Enter a guess: </label>
                <div class="input-group">
                    <input type="number" min="1" max="100" required id="guessField" class="form-control guessField" />
                    <input type="submit" value="Submit guess" class="btn btn-primary guessSubmit" />
                </div>
            </div>
            <div class="resultParas">
                <p class="guesses fw-bold"></p>
                <p class="lastResult"></p>
                <p class="lowOrHigh text-warning fw-semibold"></p>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>
        <script>
            let randomNumber = Math.floor(Math.random() * 100) + 1;
            const guesses = document.querySelector(".guesses");
            const lastResult = document.querySelector(".lastResult");
            const lowOrHigh = document.querySelector(".lowOrHigh");
            const guessSubmit = document.querySelector(".guessSubmit");
            const guessField = document.querySelector(".guessField");
            let guessCount = 1;
            let resetButton;
            guessSubmit.addEventListener("click", guessCheck);
            function guessCheck(){
                const userGuess = Number(guessField.value);
                if(guessCount === 1){
                    guesses.textContent = "Previous guesses:"
                }
                guesses.textContent = `${guesses.textContent} ${userGuess}`;
                if(userGuess === randomNumber){
                    lastResult.textContent = "Congratulations! You got it right!";
                    lastResult.className = "lastResult alert alert-success";
                    lowOrHigh.textContent = "";
                    setGameOver();
                }else if(guessCount === 10){
                    lastResult.textContent = "!!!GAME OVER!!!";
                    lastResult.className = "lastResult alert alert-danger";
                    lowOrHigh.textContent = "";
                    setGameOver();
                }else{
                    lastResult.textContent = "Wrong!";
                    lastResult.className = "lastResult alert alert-danger";
                    if(userGuess < randomNumber){
                        lowOrHigh.textContent = "Last guess was too low!";
                    }else if(userGuess > randomNumber){
                        lowOrHigh.textContent = "Last guess was too high!";
                    }
                }
                guessCount++;
                guessField.value = "";
                guessField.focus();
            }
            function setGameOver(){
                guessField.disabled = true;
                guessSubmit.disabled = true;
                resetButton = document.createElement("button");
                resetButton.textContent = "Start new game";
                resetButton.className = "btn btn-success mt-3";
                document.body.append(resetButton);
                resetButton.addEventListener("click", resetGame);
            }
            function resetGame(){
                guessCount = 1;
                const resetParas = document.querySelectorAll(".resultParas p");
                for(const resetPara of resetParas){
                    resetPara.textContent = "";
                }
                resetButton.parentNode.removeChild(resetButton);
                guessField.disabled = false;
                guessSubmit.disabled = false;
                guessField.value = "";
                guessField.focus();
                lastResult.className = "lastResult";
                randomNumber = Math.floor(Math.random() * 100) + 1;
            }
        </script>
    </body>
</html>